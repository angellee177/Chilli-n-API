function cov_1fvy4x1q9i(){var path="/home/angellee/nodejs/AIA-MidFullstack-assessment/routes/index.js";var hash="55d250ce6a4e9431b10aea70f14920d14fcc3548";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/angellee/nodejs/AIA-MidFullstack-assessment/routes/index.js",statementMap:{"0":{start:{line:1,column:43},end:{line:1,column:73}},"1":{start:{line:2,column:22},end:{line:2,column:40}},"2":{start:{line:3,column:22},end:{line:3,column:38}},"3":{start:{line:4,column:22},end:{line:4,column:40}},"4":{start:{line:5,column:22},end:{line:5,column:39}},"5":{start:{line:6,column:22},end:{line:6,column:91}},"6":{start:{line:10,column:0},end:{line:49,column:3}},"7":{start:{line:11,column:4},end:{line:48,column:5}},"8":{start:{line:12,column:8},end:{line:44,column:11}},"9":{start:{line:16,column:16},end:{line:43,column:17}},"10":{start:{line:18,column:38},end:{line:21,column:21}},"11":{start:{line:24,column:31},end:{line:24,column:54}},"12":{start:{line:27,column:36},end:{line:40,column:23}},"13":{start:{line:27,column:55},end:{line:40,column:21}},"14":{start:{line:42,column:20},end:{line:42,column:91}},"15":{start:{line:53,column:0},end:{line:88,column:3}},"16":{start:{line:54,column:4},end:{line:87,column:5}},"17":{start:{line:55,column:22},end:{line:55,column:47}},"18":{start:{line:56,column:30},end:{line:57,column:97}},"19":{start:{line:60,column:8},end:{line:82,column:11}},"20":{start:{line:64,column:12},end:{line:81,column:13}},"21":{start:{line:66,column:32},end:{line:74,column:19}},"22":{start:{line:66,column:64},end:{line:74,column:17}},"23":{start:{line:76,column:16},end:{line:76,column:87}},"24":{start:{line:91,column:0},end:{line:91,column:24}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:25},end:{line:10,column:26}},loc:{start:{line:10,column:39},end:{line:49,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:15,column:11},end:{line:15,column:12}},loc:{start:{line:15,column:43},end:{line:44,column:9}},line:15},"2":{name:"(anonymous_2)",decl:{start:{line:27,column:45},end:{line:27,column:46}},loc:{start:{line:27,column:55},end:{line:40,column:21}},line:27},"3":{name:"(anonymous_3)",decl:{start:{line:53,column:33},end:{line:53,column:34}},loc:{start:{line:53,column:47},end:{line:88,column:1}},line:53},"4":{name:"(anonymous_4)",decl:{start:{line:63,column:11},end:{line:63,column:12}},loc:{start:{line:63,column:44},end:{line:82,column:9}},line:63},"5":{name:"(anonymous_5)",decl:{start:{line:66,column:54},end:{line:66,column:55}},loc:{start:{line:66,column:64},end:{line:74,column:17}},line:66}},branchMap:{"0":{loc:{start:{line:16,column:16},end:{line:43,column:17}},type:"if",locations:[{start:{line:16,column:16},end:{line:43,column:17}},{start:{line:16,column:16},end:{line:43,column:17}}],line:16},"1":{loc:{start:{line:16,column:20},end:{line:16,column:57}},type:"binary-expr",locations:[{start:{line:16,column:20},end:{line:16,column:26}},{start:{line:16,column:30},end:{line:16,column:57}}],line:16},"2":{loc:{start:{line:64,column:12},end:{line:81,column:13}},type:"if",locations:[{start:{line:64,column:12},end:{line:81,column:13}},{start:{line:64,column:12},end:{line:81,column:13}}],line:64},"3":{loc:{start:{line:64,column:16},end:{line:64,column:53}},type:"binary-expr",locations:[{start:{line:64,column:16},end:{line:64,column:22}},{start:{line:64,column:26},end:{line:64,column:53}}],line:64}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"55d250ce6a4e9431b10aea70f14920d14fcc3548"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1fvy4x1q9i=function(){return actualCoverage;};}return actualCoverage;}cov_1fvy4x1q9i();const{errorResponse,successResponse}=(cov_1fvy4x1q9i().s[0]++,require('../helpers/response')),express=(cov_1fvy4x1q9i().s[1]++,require('express')),router=(cov_1fvy4x1q9i().s[2]++,express.Router()),request=(cov_1fvy4x1q9i().s[3]++,require('request')),moment=(cov_1fvy4x1q9i().s[4]++,require('moment')),feedList=(cov_1fvy4x1q9i().s[5]++,"https://api.flickr.com/services/feeds/photos_public.gne?format=json");// Get Feed List
cov_1fvy4x1q9i().s[6]++;router.get('/feed/list',(req,res)=>{cov_1fvy4x1q9i().f[0]++;cov_1fvy4x1q9i().s[7]++;try{cov_1fvy4x1q9i().s[8]++;request({url:feedList,json:true},function(error,response,body){cov_1fvy4x1q9i().f[1]++;cov_1fvy4x1q9i().s[9]++;if((cov_1fvy4x1q9i().b[1][0]++,!error)&&(cov_1fvy4x1q9i().b[1][1]++,response.statusCode===200)){cov_1fvy4x1q9i().b[0][0]++;// extract character from string
let mySubString=(cov_1fvy4x1q9i().s[10]++,body.substring(body.indexOf("[")-1,body.lastIndexOf("]")+1));// convert string to object 
let data=(cov_1fvy4x1q9i().s[11]++,JSON.parse(mySubString));// create new output data || reform a new output
let allPhotos=(cov_1fvy4x1q9i().s[12]++,data.map(photo=>{cov_1fvy4x1q9i().f[2]++;cov_1fvy4x1q9i().s[13]++;return{Static_URL:photo.media.m.toString().replace("\\",""),Flickr_URL:photo.link.toString().replace("\\",""),Owner_URL:'https://www.flickr.com/photos/'+photo.author_id,Title:photo.title,Description:photo.description,Published_date:moment(photo.published).format('MM MMMM YYYY'),Author:photo.author.substring(photo.author.indexOf("\"")+1,photo.author.lastIndexOf("\"")-1),Tags:photo.tags};}));cov_1fvy4x1q9i().s[14]++;res.status(200).json(successResponse("Success Fetch Data",allPhotos));}else{cov_1fvy4x1q9i().b[0][1]++;};});}catch(err){/* istanbul ignore next */return res.status(422).json(errorResponse("something went wrong when trying to fetch data",err));}});// Get Images based on Images Tags
cov_1fvy4x1q9i().s[15]++;router.get('/feed/search/:tags',(req,res)=>{cov_1fvy4x1q9i().f[3]++;cov_1fvy4x1q9i().s[16]++;try{const query=(cov_1fvy4x1q9i().s[17]++,{tags:req.params.tags}),searchByTags=(cov_1fvy4x1q9i().s[18]++,`https://www.flickr.com/services/rest/?method=flickr.photos.search&`+`api_key=5e6cf683ffcfca04200286e429c5b2de&tags=${query}&format=json&nojsoncallback=1`);cov_1fvy4x1q9i().s[19]++;request({url:searchByTags,json:true},function(error,response,body){cov_1fvy4x1q9i().f[4]++;cov_1fvy4x1q9i().s[20]++;if((cov_1fvy4x1q9i().b[3][0]++,!error)&&(cov_1fvy4x1q9i().b[3][1]++,response.statusCode===200)){cov_1fvy4x1q9i().b[2][0]++;// create a new output Data and get the Photos detail
let allPhotos=(cov_1fvy4x1q9i().s[21]++,body.photos.photo.map(photo=>{cov_1fvy4x1q9i().f[5]++;cov_1fvy4x1q9i().s[22]++;return{Static_URL:'https://farm'+photo.farm+'.staticflickr.com/'+photo.server+'/'+photo.id+'_'+photo.secret+'_b.jpg',Flickr_URL:'https://www.flickr.com/photos/'+photo.owner+'/'+photo.id,Owner_URL:'https://www.flickr.com/photos/'+photo.owner,Title:photo.title,// Published_date: moment(photo.published).format('MM MMMM YYYY'),
Author:photo.owner// Tags      : photo.tags
};}));cov_1fvy4x1q9i().s[23]++;res.status(200).json(successResponse("Success Fetch Data",allPhotos));}else{cov_1fvy4x1q9i().b[2][1]++;/* istanbul ignore next */res.status(422).json(errorResponse(`Cannot find the photos with tags ${query}`,error));}});}catch(err){/* istanbul ignore next */return res.status(422).json(errorResponse("There is something went wrong, please try again!",err));}});cov_1fvy4x1q9i().s[24]++;module.exports=router;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImVycm9yUmVzcG9uc2UiLCJzdWNjZXNzUmVzcG9uc2UiLCJyZXF1aXJlIiwiZXhwcmVzcyIsInJvdXRlciIsIlJvdXRlciIsInJlcXVlc3QiLCJtb21lbnQiLCJmZWVkTGlzdCIsImdldCIsInJlcSIsInJlcyIsInVybCIsImpzb24iLCJlcnJvciIsInJlc3BvbnNlIiwiYm9keSIsInN0YXR1c0NvZGUiLCJteVN1YlN0cmluZyIsInN1YnN0cmluZyIsImluZGV4T2YiLCJsYXN0SW5kZXhPZiIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJhbGxQaG90b3MiLCJtYXAiLCJwaG90byIsIlN0YXRpY19VUkwiLCJtZWRpYSIsIm0iLCJ0b1N0cmluZyIsInJlcGxhY2UiLCJGbGlja3JfVVJMIiwibGluayIsIk93bmVyX1VSTCIsImF1dGhvcl9pZCIsIlRpdGxlIiwidGl0bGUiLCJEZXNjcmlwdGlvbiIsImRlc2NyaXB0aW9uIiwiUHVibGlzaGVkX2RhdGUiLCJwdWJsaXNoZWQiLCJmb3JtYXQiLCJBdXRob3IiLCJhdXRob3IiLCJUYWdzIiwidGFncyIsInN0YXR1cyIsImVyciIsInF1ZXJ5IiwicGFyYW1zIiwic2VhcmNoQnlUYWdzIiwicGhvdG9zIiwiZmFybSIsInNlcnZlciIsImlkIiwic2VjcmV0Iiwib3duZXIiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoibTJIQWVZOzJGQWZaLEtBQU0sQ0FBRUEsYUFBRixDQUFpQkMsZUFBakIsMkJBQXFDQyxPQUFPLENBQUMscUJBQUQsQ0FBNUMsQ0FBTixDQUNNQyxPQUFPLDBCQUFTRCxPQUFPLENBQUMsU0FBRCxDQUFoQixDQURiLENBRU1FLE1BQU0sMEJBQVVELE9BQU8sQ0FBQ0UsTUFBUixFQUFWLENBRlosQ0FHTUMsT0FBTywwQkFBU0osT0FBTyxDQUFDLFNBQUQsQ0FBaEIsQ0FIYixDQUlNSyxNQUFNLDBCQUFVTCxPQUFPLENBQUMsUUFBRCxDQUFqQixDQUpaLENB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Q3FDLE1BQUosQ0FBVyxHQUFYLEVBQWdCbkMsSUFBaEIsQ0FBcUJiLGFBQWEsQ0FBQyxrREFBRCxDQUFxRGlELEdBQXJELENBQWxDLENBQVAsQ0FDSCxDQUNKLENBbkNELEUseUJBc0NBVSxNQUFNLENBQUNDLE9BQVAsQ0FBaUJ4RCxNQUFqQiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgZXJyb3JSZXNwb25zZSwgc3VjY2Vzc1Jlc3BvbnNlIH0gPSByZXF1aXJlKCcuLi9oZWxwZXJzL3Jlc3BvbnNlJylcbiAgICAsIGV4cHJlc3MgICAgICAgPSByZXF1aXJlKCdleHByZXNzJylcbiAgICAsIHJvdXRlciAgICAgICAgPSBleHByZXNzLlJvdXRlcigpXG4gICAgLCByZXF1ZXN0ICAgICAgID0gcmVxdWlyZSgncmVxdWVzdCcpXG4gICAgLCBtb21lbnQgICAgICAgID0gcmVxdWlyZSgnbW9tZW50JylcbiAgICAsIGZlZWRMaXN0ICAgICAgPSBcImh0dHBzOi8vYXBpLmZsaWNrci5jb20vc2VydmljZXMvZmVlZHMvcGhvdG9zX3B1YmxpYy5nbmU/Zm9ybWF0PWpzb25cIlxuXG5cbi8vIEdldCBGZWVkIExpc3RcbnJvdXRlci5nZXQoJy9mZWVkL2xpc3QnLCAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICByZXF1ZXN0KHtcbiAgICAgICAgICAgIHVybCAgICAgOiBmZWVkTGlzdCxcbiAgICAgICAgICAgIGpzb24gICAgOiB0cnVlLFxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWVycm9yICYmIHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBleHRyYWN0IGNoYXJhY3RlciBmcm9tIHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICBsZXQgbXlTdWJTdHJpbmcgPSBib2R5LnN1YnN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHkuaW5kZXhPZihcIltcIikgLSAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgYm9keS5sYXN0SW5kZXhPZihcIl1cIikgKyAxXG4gICAgICAgICAgICAgICAgICAgIClcblxuICAgICAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IHN0cmluZyB0byBvYmplY3QgXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gSlNPTi5wYXJzZShteVN1YlN0cmluZylcblxuICAgICAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IG91dHB1dCBkYXRhIHx8IHJlZm9ybSBhIG5ldyBvdXRwdXRcbiAgICAgICAgICAgICAgICAgICAgbGV0IGFsbFBob3RvcyA9IGRhdGEubWFwKHBob3RvID0+ICh7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIFN0YXRpY19VUkw6IHBob3RvLm1lZGlhLm0udG9TdHJpbmcoKS5yZXBsYWNlKFwiXFxcXFwiLCBcIlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEZsaWNrcl9VUkw6IHBob3RvLmxpbmsudG9TdHJpbmcoKS5yZXBsYWNlKFwiXFxcXFwiLCBcIlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIE93bmVyX1VSTCA6ICdodHRwczovL3d3dy5mbGlja3IuY29tL3Bob3Rvcy8nICsgcGhvdG8uYXV0aG9yX2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgVGl0bGUgICAgIDogcGhvdG8udGl0bGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBEZXNjcmlwdGlvbjogcGhvdG8uZGVzY3JpcHRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICBQdWJsaXNoZWRfZGF0ZTogbW9tZW50KHBob3RvLnB1Ymxpc2hlZCkuZm9ybWF0KCdNTSBNTU1NIFlZWVknKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEF1dGhvcjogcGhvdG8uYXV0aG9yLnN1YnN0cmluZyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG90by5hdXRob3IuaW5kZXhPZihcIlxcXCJcIikgKyAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob3RvLmF1dGhvci5sYXN0SW5kZXhPZihcIlxcXCJcIikgLSAxXG4gICAgICAgICAgICAgICAgICAgICAgICApLFxuICAgICAgICAgICAgICAgICAgICAgICAgVGFnczogcGhvdG8udGFnc1xuICAgICAgICAgICAgICAgICAgICB9KSlcblxuICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzKDIwMCkuanNvbihzdWNjZXNzUmVzcG9uc2UoXCJTdWNjZXNzIEZldGNoIERhdGFcIiwgYWxsUGhvdG9zKSk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQyMikuanNvbihlcnJvclJlc3BvbnNlKFwic29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hlbiB0cnlpbmcgdG8gZmV0Y2ggZGF0YVwiLCBlcnIpKTtcbiAgICB9XG59KTsgICBcblxuXG4vLyBHZXQgSW1hZ2VzIGJhc2VkIG9uIEltYWdlcyBUYWdzXG5yb3V0ZXIuZ2V0KCcvZmVlZC9zZWFyY2gvOnRhZ3MnLCAocmVxLCByZXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBxdWVyeSA9IHsgdGFnczogcmVxLnBhcmFtcy50YWdzIH1cbiAgICAgICAgICAgICwgc2VhcmNoQnlUYWdzICA9IGBodHRwczovL3d3dy5mbGlja3IuY29tL3NlcnZpY2VzL3Jlc3QvP21ldGhvZD1mbGlja3IucGhvdG9zLnNlYXJjaCZgK1xuICAgICAgICAgICAgYGFwaV9rZXk9NWU2Y2Y2ODNmZmNmY2EwNDIwMDI4NmU0MjljNWIyZGUmdGFncz0ke3F1ZXJ5fSZmb3JtYXQ9anNvbiZub2pzb25jYWxsYmFjaz0xYFxuXG5cbiAgICAgICAgcmVxdWVzdCh7XG4gICAgICAgICAgICB1cmwgOiBzZWFyY2hCeVRhZ3MsXG4gICAgICAgICAgICBqc29uOiB0cnVlXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvciwgcmVzcG9uc2UsIGJvZHkpIHtcbiAgICAgICAgICAgIGlmICghZXJyb3IgJiYgcmVzcG9uc2Uuc3RhdHVzQ29kZSA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIGEgbmV3IG91dHB1dCBEYXRhIGFuZCBnZXQgdGhlIFBob3RvcyBkZXRhaWxcbiAgICAgICAgICAgICAgICBsZXQgYWxsUGhvdG9zID0gYm9keS5waG90b3MucGhvdG8ubWFwKHBob3RvID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIFN0YXRpY19VUkw6ICdodHRwczovL2Zhcm0nICsgcGhvdG8uZmFybSArICcuc3RhdGljZmxpY2tyLmNvbS8nICsgcGhvdG8uc2VydmVyICsgJy8nICsgcGhvdG8uaWQgKyAnXycgKyBwaG90by5zZWNyZXQgKyAnX2IuanBnJyxcbiAgICAgICAgICAgICAgICAgICAgRmxpY2tyX1VSTDogJ2h0dHBzOi8vd3d3LmZsaWNrci5jb20vcGhvdG9zLycgKyBwaG90by5vd25lciArICcvJyArIHBob3RvLmlkLFxuICAgICAgICAgICAgICAgICAgICBPd25lcl9VUkwgOiAnaHR0cHM6Ly93d3cuZmxpY2tyLmNvbS9waG90b3MvJyArIHBob3RvLm93bmVyLFxuICAgICAgICAgICAgICAgICAgICBUaXRsZSAgICAgOiBwaG90by50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gUHVibGlzaGVkX2RhdGU6IG1vbWVudChwaG90by5wdWJsaXNoZWQpLmZvcm1hdCgnTU0gTU1NTSBZWVlZJyksXG4gICAgICAgICAgICAgICAgICAgIEF1dGhvciAgICA6IHBob3RvLm93bmVyLFxuICAgICAgICAgICAgICAgICAgICAvLyBUYWdzICAgICAgOiBwaG90by50YWdzXG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oc3VjY2Vzc1Jlc3BvbnNlKFwiU3VjY2VzcyBGZXRjaCBEYXRhXCIsIGFsbFBob3RvcykpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAgICAgcmVzLnN0YXR1cyg0MjIpLmpzb24oZXJyb3JSZXNwb25zZShgQ2Fubm90IGZpbmQgdGhlIHBob3RvcyB3aXRoIHRhZ3MgJHtxdWVyeX1gLCBlcnJvcikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQyMikuanNvbihlcnJvclJlc3BvbnNlKFwiVGhlcmUgaXMgc29tZXRoaW5nIHdlbnQgd3JvbmcsIHBsZWFzZSB0cnkgYWdhaW4hXCIsIGVycikpO1xuICAgIH1cbn0pO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gcm91dGVyO1xuXG4iXX0=